<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>ASN Application | Use your own IP to access the Internet | Vincent's Notes</title>
<meta name=keywords content="ASN,BGP,Bird,Linux,BuyVM"><meta name=description content="ASN 是什么 自治系统(Autonomous System)，用通俗的语言来形容，就是一个互联网的独立王国，这一个个独立王国互联起来，就组成了互联网(Internet)。
每个王国有自己独立的国号，以区别于别的王国，这个国号用自治系统号 ASN(Autonomous System Number)，ASN 由两个字节组成，理论上取值范围为 1-65535，末尾的 1024 个 ASN 是私有自治号，用于王国内部的下属郡国使用，不能外泄（类似私有 IP，如果不小心外泄，别人也会忽略)
每一个互联网用户都置身于 AS 内，比如中国电信的 AS 号为 4809，那么中国电信的用户就置身于 4809 的独立王国，如果用户访问的服务器也是在这个 AS 内，那双向的流量都在王国里来回溜达。
但如果服务器 IP 位于中国移动 AS 内，如何跨运营商访问呢？
运营商之间会使用 BGP(Border Gateway Protocol)路由协议来交换各自的 lP 路由表，AS 号就是 BGP 协议用来辨识邻国的一个身份证，同时在交换的路由表信息里，会附上各自的 AS 号。
既然中国电信通过 BGP 学习到中国移动的路由信息，就会把用户的访问请求转发给中国移动的边界路由器，既然 IP 包进入中国移动的地界，接下来就任由中国移动的设备来处理了，假设顺利到达服务器，回程检查客户 IP，发现是电信的 IP，就会转发到电信的边界路由器，并到达用户。
我的 ASN 信息——AS206729 AS206729 Prefixes v6 2401:95c0:f001::/48
AS206729 Peers v6 Rank Description IPv6 Peer 1 FranTech Solutions 2401: 95c0: f001:: 1/128 AS53667 更多详情，前往 BGP."><meta name=author content="Vincent Young"><link rel=canonical href=https://missuo.me/posts/as206729/><link crossorigin=anonymous href=/assets/css/stylesheet.5cfc680b1eeaeef9efbced92d46c2a9e876b72ee14fba85846afc4cff9e6e6f8.css integrity="sha256-XPxoCx7q7vnvvO2S1Gwqnodrcu4U+6hYRq/Ez/nm5vg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://r2.qwq.mx/blog/20230104uZXT8s.ico><link rel=icon type=image/png sizes=16x16 href=https://missuo.me/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://missuo.me/favicon-32x32.png><link rel=apple-touch-icon href=https://missuo.me/apple-touch-icon.png><link rel=mask-icon href=https://missuo.me/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><head><script async src=https://analytics.missuo.me/script.js data-website-id=af38d6d0-ee75-4102-b26c-757fd5666f05></script></head><meta property="og:title" content="ASN Application | Use your own IP to access the Internet"><meta property="og:description" content="ASN 是什么 自治系统(Autonomous System)，用通俗的语言来形容，就是一个互联网的独立王国，这一个个独立王国互联起来，就组成了互联网(Internet)。
每个王国有自己独立的国号，以区别于别的王国，这个国号用自治系统号 ASN(Autonomous System Number)，ASN 由两个字节组成，理论上取值范围为 1-65535，末尾的 1024 个 ASN 是私有自治号，用于王国内部的下属郡国使用，不能外泄（类似私有 IP，如果不小心外泄，别人也会忽略)
每一个互联网用户都置身于 AS 内，比如中国电信的 AS 号为 4809，那么中国电信的用户就置身于 4809 的独立王国，如果用户访问的服务器也是在这个 AS 内，那双向的流量都在王国里来回溜达。
但如果服务器 IP 位于中国移动 AS 内，如何跨运营商访问呢？
运营商之间会使用 BGP(Border Gateway Protocol)路由协议来交换各自的 lP 路由表，AS 号就是 BGP 协议用来辨识邻国的一个身份证，同时在交换的路由表信息里，会附上各自的 AS 号。
既然中国电信通过 BGP 学习到中国移动的路由信息，就会把用户的访问请求转发给中国移动的边界路由器，既然 IP 包进入中国移动的地界，接下来就任由中国移动的设备来处理了，假设顺利到达服务器，回程检查客户 IP，发现是电信的 IP，就会转发到电信的边界路由器，并到达用户。
我的 ASN 信息——AS206729 AS206729 Prefixes v6 2401:95c0:f001::/48
AS206729 Peers v6 Rank Description IPv6 Peer 1 FranTech Solutions 2401: 95c0: f001:: 1/128 AS53667 更多详情，前往 BGP."><meta property="og:type" content="article"><meta property="og:url" content="https://missuo.me/posts/as206729/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-04-04T05:44:38+00:00"><meta property="article:modified_time" content="2022-04-04T05:44:38+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="ASN Application | Use your own IP to access the Internet"><meta name=twitter:description content="ASN 是什么 自治系统(Autonomous System)，用通俗的语言来形容，就是一个互联网的独立王国，这一个个独立王国互联起来，就组成了互联网(Internet)。
每个王国有自己独立的国号，以区别于别的王国，这个国号用自治系统号 ASN(Autonomous System Number)，ASN 由两个字节组成，理论上取值范围为 1-65535，末尾的 1024 个 ASN 是私有自治号，用于王国内部的下属郡国使用，不能外泄（类似私有 IP，如果不小心外泄，别人也会忽略)
每一个互联网用户都置身于 AS 内，比如中国电信的 AS 号为 4809，那么中国电信的用户就置身于 4809 的独立王国，如果用户访问的服务器也是在这个 AS 内，那双向的流量都在王国里来回溜达。
但如果服务器 IP 位于中国移动 AS 内，如何跨运营商访问呢？
运营商之间会使用 BGP(Border Gateway Protocol)路由协议来交换各自的 lP 路由表，AS 号就是 BGP 协议用来辨识邻国的一个身份证，同时在交换的路由表信息里，会附上各自的 AS 号。
既然中国电信通过 BGP 学习到中国移动的路由信息，就会把用户的访问请求转发给中国移动的边界路由器，既然 IP 包进入中国移动的地界，接下来就任由中国移动的设备来处理了，假设顺利到达服务器，回程检查客户 IP，发现是电信的 IP，就会转发到电信的边界路由器，并到达用户。
我的 ASN 信息——AS206729 AS206729 Prefixes v6 2401:95c0:f001::/48
AS206729 Peers v6 Rank Description IPv6 Peer 1 FranTech Solutions 2401: 95c0: f001:: 1/128 AS53667 更多详情，前往 BGP."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://missuo.me/posts/"},{"@type":"ListItem","position":3,"name":"ASN Application | Use your own IP to access the Internet","item":"https://missuo.me/posts/as206729/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"ASN Application | Use your own IP to access the Internet","name":"ASN Application | Use your own IP to access the Internet","description":"ASN 是什么 自治系统(Autonomous System)，用通俗的语言来形容，就是一个互联网的独立王国，这一个个独立王国互联起来，就组成了互联网(Internet)。\n每个王国有自己独立的国号，以区别于别的王国，这个国号用自治系统号 ASN(Autonomous System Number)，ASN 由两个字节组成，理论上取值范围为 1-65535，末尾的 1024 个 ASN 是私有自治号，用于王国内部的下属郡国使用，不能外泄（类似私有 IP，如果不小心外泄，别人也会忽略)\n每一个互联网用户都置身于 AS 内，比如中国电信的 AS 号为 4809，那么中国电信的用户就置身于 4809 的独立王国，如果用户访问的服务器也是在这个 AS 内，那双向的流量都在王国里来回溜达。\n但如果服务器 IP 位于中国移动 AS 内，如何跨运营商访问呢？\n运营商之间会使用 BGP(Border Gateway Protocol)路由协议来交换各自的 lP 路由表，AS 号就是 BGP 协议用来辨识邻国的一个身份证，同时在交换的路由表信息里，会附上各自的 AS 号。\n既然中国电信通过 BGP 学习到中国移动的路由信息，就会把用户的访问请求转发给中国移动的边界路由器，既然 IP 包进入中国移动的地界，接下来就任由中国移动的设备来处理了，假设顺利到达服务器，回程检查客户 IP，发现是电信的 IP，就会转发到电信的边界路由器，并到达用户。\n我的 ASN 信息——AS206729 AS206729 Prefixes v6 2401:95c0:f001::/48\nAS206729 Peers v6 Rank Description IPv6 Peer 1 FranTech Solutions 2401: 95c0: f001:: 1/128 AS53667 更多详情，前往 BGP.","keywords":["ASN","BGP","Bird","Linux","BuyVM"],"articleBody":"ASN 是什么 自治系统(Autonomous System)，用通俗的语言来形容，就是一个互联网的独立王国，这一个个独立王国互联起来，就组成了互联网(Internet)。\n每个王国有自己独立的国号，以区别于别的王国，这个国号用自治系统号 ASN(Autonomous System Number)，ASN 由两个字节组成，理论上取值范围为 1-65535，末尾的 1024 个 ASN 是私有自治号，用于王国内部的下属郡国使用，不能外泄（类似私有 IP，如果不小心外泄，别人也会忽略)\n每一个互联网用户都置身于 AS 内，比如中国电信的 AS 号为 4809，那么中国电信的用户就置身于 4809 的独立王国，如果用户访问的服务器也是在这个 AS 内，那双向的流量都在王国里来回溜达。\n但如果服务器 IP 位于中国移动 AS 内，如何跨运营商访问呢？\n运营商之间会使用 BGP(Border Gateway Protocol)路由协议来交换各自的 lP 路由表，AS 号就是 BGP 协议用来辨识邻国的一个身份证，同时在交换的路由表信息里，会附上各自的 AS 号。\n既然中国电信通过 BGP 学习到中国移动的路由信息，就会把用户的访问请求转发给中国移动的边界路由器，既然 IP 包进入中国移动的地界，接下来就任由中国移动的设备来处理了，假设顺利到达服务器，回程检查客户 IP，发现是电信的 IP，就会转发到电信的边界路由器，并到达用户。\n我的 ASN 信息——AS206729 AS206729 Prefixes v6 2401:95c0:f001::/48\nAS206729 Peers v6 Rank Description IPv6 Peer 1 FranTech Solutions 2401: 95c0: f001:: 1/128 AS53667 更多详情，前往 BGP.TOOLS 查看。 如何申请 ASN 一般情况下，需要寻找 APNIC 或者 RIPE 的会员来作为你的 LIR。当然你也可以自己加入 APNIC 或者 RIPE，需要每年缴纳费用。\n我找的是台湾的一个朋友 Hostinginside LTD(AS9678)，他作为我的 LIR，申请的是 RIPE。提供信息到签合同到补全信息，最后下号，花了不到一周的时间。APNIC 可能没那么快。\nRIPE 准备的材料 注册 RIPE 账号，新建一些 Database 的信息。 你的护照照片 你在欧洲拥有网络服务的证明（购买的订单截图、机房地址和管理员邮箱） ISP 愿意给你接入 BGP 的证明 两个需要接入的 ASN ASN 下号 接入 BGP Session（以 BuyVM 为例，Vultr 类似） 发 Ticket 告诉客服你的 ASN 号，客服一般会向该 ASN 的管理员邮箱发送一串随机字符串，需要在工单中回复，验证你是 ASN 的持有人。稍后，客服会在面板里面加入你的 ASN 和你的 IP 段。 在你的 VPS 上安装 bird。用于宣告你的 IP。 修改 /etc/bird/bird6.conf 的配置文件 修改配置中的 router id 改为自己的 IPv4 地址 router id 205.121.23.12; 在文件的最后添加上 protocol bgp vultr { local as 你的 asn(开头不带 as); source address 实例的 ipv6; import none; export all; graceful restart on; multihop 2; neighbor 2001: 19f0: ffff:: 1 as 64515; #这个是服务器的 ip password \"在申请广播的时候设置的 bgp 密码\"; } 寻找到 protocol static（没有的话自己加一个） protocol static { route [v6 前缀] via [实例的 IPv6]; #route 2001: 2333: 2333::/48 via 4096: 4096: 4096: 338: 5400: 01ff: fecf: 596c; } 找到 protocol direct protocol direct { interface \" dummy*\"; import all; } 配置虚拟网卡以及 ip 地址 ip link add dev dummy1 type dummy # 添加虚拟网卡 ip link set dummy1 up ip addr add dev dummy1 [前缀内的任意一个地址] # 添加地址 启动 bird6 service bird6 restart 查看状态 birdc6 show route birdc6 show proto all 如果想要开机自启 在 /etc/netplan 新增 01.dummy.yaml network: version: 2 renderer: networkd bridges: dummy0: dhcp4: no dhcp6: no accept-ra: no interfaces: [ ] addresses: - 2401: 95c0: f001:: 1/128 #你的 IP 配置 XrayR 的出站路由 { \"domainStrategy\": \"IPOnDemand\", \"rules\": [ { \"type\": \"field\", \"outboundTag\": \"block\", \"ip\": [ \"geoip: private\" ] }, { \"type\": \"field\", \"outboundTag\": \"block\", \"protocol\": [ \"bittorrent\" ] }, # 指定域名走我自己的 IP { \"type\": \"field\", \"outboundTag\": \"bgp_session\", \"domain\": [\"ipv6.ip.sb\"] }, # Netflix 和 YouTube 走我自己的 IP { \"type\": \"field\", \"outboundTag\": \"bgp_session\", \"domain\": [ \"geosite: netflix\", \"geosite: youtube\" ] } ] } 上网测试 IP.SB Netflix（解锁台湾 NF 所有片源） YouTube（支持 Premium TW） 参考文章 年轻人的第一个私人 BGP(二) - 广播你的 IP\nIP 广播: 使用 bird 广播(组播)ipv6\n","wordCount":"365","inLanguage":"en","datePublished":"2022-04-04T05:44:38Z","dateModified":"2022-04-04T05:44:38Z","author":{"@type":"Person","name":"Vincent Young"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://missuo.me/posts/as206729/"},"publisher":{"@type":"Organization","name":"Vincent's Notes","logo":{"@type":"ImageObject","url":"https://r2.qwq.mx/blog/20230104uZXT8s.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://missuo.me accesskey=h title="Vincent's Notes (Alt + H)">Vincent's Notes</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://missuo.me/ title=Home><span>Home</span></a></li><li><a href=https://missuo.me/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://missuo.me/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://missuo.me/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://missuo.me/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>ASN Application | Use your own IP to access the Internet</h1><div class=post-meta><span title='2022-04-04 05:44:38 +0000 UTC'>Monday, April 4, 2022</span>&nbsp;·&nbsp;Vincent Young</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#asn-%e6%98%af%e4%bb%80%e4%b9%88 aria-label="ASN 是什么">ASN 是什么</a></li><li><a href=#%e6%88%91%e7%9a%84-asn-%e4%bf%a1%e6%81%afas206729 aria-label="我的 ASN 信息——AS206729">我的 ASN 信息——AS206729</a><ul><li><a href=#as206729-prefixes-v6 aria-label="AS206729 Prefixes v6"><strong>AS206729 Prefixes v6</strong></a></li><li><a href=#as206729-peers-v6 aria-label="AS206729 Peers v6"><strong>AS206729 Peers v6</strong></a></li><li><a href=#%e6%9b%b4%e5%a4%9a%e8%af%a6%e6%83%85%e5%89%8d%e5%be%80-bgptoolshttpsbgptoolsas206729-%e6%9f%a5%e7%9c%8b aria-label="更多详情，前往 BGP.TOOLS 查看。">更多详情，前往 <a href=https://bgp.tools/as/206729>BGP.TOOLS</a> 查看。</a></li></ul></li><li><a href=#%e5%a6%82%e4%bd%95%e7%94%b3%e8%af%b7-asn aria-label="如何申请 ASN">如何申请 ASN</a><ul><li><a href=#ripe-%e5%87%86%e5%a4%87%e7%9a%84%e6%9d%90%e6%96%99 aria-label="RIPE 准备的材料">RIPE 准备的材料</a></li></ul></li><li><a href=#asn-%e4%b8%8b%e5%8f%b7 aria-label="ASN 下号">ASN 下号</a></li><li><a href=#%e6%8e%a5%e5%85%a5-bgp-session%e4%bb%a5-buyvm-%e4%b8%ba%e4%be%8bvultr-%e7%b1%bb%e4%bc%bc aria-label="接入 BGP Session（以 BuyVM 为例，Vultr 类似）">接入 BGP Session（以 BuyVM 为例，Vultr 类似）</a></li><li><a href=#%e9%85%8d%e7%bd%ae-xrayr-%e7%9a%84%e5%87%ba%e7%ab%99%e8%b7%af%e7%94%b1 aria-label="配置 XrayR 的出站路由">配置 XrayR 的出站路由</a></li><li><a href=#%e4%b8%8a%e7%bd%91%e6%b5%8b%e8%af%95 aria-label=上网测试>上网测试</a><ul><li><a href=#ipsb aria-label=IP.SB>IP.SB</a></li><li><a href=#netflix%e8%a7%a3%e9%94%81%e5%8f%b0%e6%b9%be-nf-%e6%89%80%e6%9c%89%e7%89%87%e6%ba%90 aria-label="Netflix（解锁台湾 NF 所有片源）">Netflix（解锁台湾 NF 所有片源）</a></li><li><a href=#youtube%e6%94%af%e6%8c%81-premium-tw aria-label="YouTube（支持 Premium TW）">YouTube（支持 Premium TW）</a></li></ul></li><li><a href=#%e5%8f%82%e8%80%83%e6%96%87%e7%ab%a0 aria-label=参考文章>参考文章</a></li></ul></div></details></div><div class=post-content><h2 id=asn-是什么>ASN 是什么<a hidden class=anchor aria-hidden=true href=#asn-是什么>#</a></h2><blockquote><p>自治系统(Autonomous System)，用通俗的语言来形容，就是一个互联网的独立王国，这一个个独立王国互联起来，就组成了互联网(Internet)。</p></blockquote><blockquote><p>每个王国有自己独立的国号，以区别于别的王国，这个国号用自治系统号 ASN(Autonomous System Number)，ASN 由两个字节组成，理论上取值范围为 1-65535，末尾的 1024 个 ASN 是私有自治号，用于王国内部的下属郡国使用，不能外泄（类似私有 IP，如果不小心外泄，别人也会忽略)</p></blockquote><blockquote><p>每一个互联网用户都置身于 AS 内，比如中国电信的 AS 号为 4809，那么中国电信的用户就置身于 4809 的独立王国，如果用户访问的服务器也是在这个 AS 内，那双向的流量都在王国里来回溜达。</p></blockquote><blockquote><p>但如果服务器 IP 位于中国移动 AS 内，如何跨运营商访问呢？</p></blockquote><blockquote><blockquote><p>运营商之间会使用 BGP(Border Gateway Protocol)路由协议来交换各自的 lP 路由表，AS 号就是 BGP 协议用来辨识邻国的一个身份证，同时在交换的路由表信息里，会附上各自的 AS 号。</p></blockquote></blockquote><blockquote><blockquote><p>既然中国电信通过 BGP 学习到中国移动的路由信息，就会把用户的访问请求转发给中国移动的边界路由器，既然 IP 包进入中国移动的地界，接下来就任由中国移动的设备来处理了，假设顺利到达服务器，回程检查客户 IP，发现是电信的 IP，就会转发到电信的边界路由器，并到达用户。</p></blockquote></blockquote><h2 id=我的-asn-信息as206729>我的 ASN 信息——AS206729<a hidden class=anchor aria-hidden=true href=#我的-asn-信息as206729>#</a></h2><p><img loading=lazy src=https://r2.qwq.mx/blog/20220402OuAhUS.jpg alt=20220402OuAhUS></p><h3 id=as206729-prefixes-v6><strong>AS206729 Prefixes v6</strong><a hidden class=anchor aria-hidden=true href=#as206729-prefixes-v6>#</a></h3><p><code>2401:95c0:f001::/48</code></p><h3 id=as206729-peers-v6><strong>AS206729 Peers v6</strong><a hidden class=anchor aria-hidden=true href=#as206729-peers-v6>#</a></h3><table><thead><tr><th>Rank</th><th>Description</th><th>IPv6</th><th>Peer</th></tr></thead><tbody><tr><td>1</td><td>FranTech Solutions</td><td>2401: 95c0: f001:: 1/128</td><td>AS53667</td></tr></tbody></table><h3 id=更多详情前往-bgptoolshttpsbgptoolsas206729-查看>更多详情，前往 <a href=https://bgp.tools/as/206729>BGP.TOOLS</a> 查看。<a hidden class=anchor aria-hidden=true href=#更多详情前往-bgptoolshttpsbgptoolsas206729-查看>#</a></h3><h2 id=如何申请-asn>如何申请 ASN<a hidden class=anchor aria-hidden=true href=#如何申请-asn>#</a></h2><p>一般情况下，需要寻找 <code>APNIC</code> 或者 <code>RIPE</code> 的会员来作为你的 <code>LIR</code>。当然你也可以自己加入 <code>APNIC</code> 或者 <code>RIPE</code>，需要每年缴纳费用。</p><p>我找的是台湾的一个朋友 <code>Hostinginside LTD(AS9678)</code>，他作为我的 <code>LIR</code>，申请的是 <code>RIPE</code>。提供信息到签合同到补全信息，最后下号，花了不到一周的时间。<code>APNIC</code> 可能没那么快。</p><h3 id=ripe-准备的材料>RIPE 准备的材料<a hidden class=anchor aria-hidden=true href=#ripe-准备的材料>#</a></h3><ul><li>注册 <code>RIPE</code> 账号，新建一些 <code>Database</code> 的信息。</li><li>你的护照照片</li><li>你在欧洲拥有网络服务的证明（购买的订单截图、机房地址和管理员邮箱）</li><li>ISP 愿意给你接入 BGP 的证明</li><li>两个需要接入的 ASN</li></ul><h2 id=asn-下号>ASN 下号<a hidden class=anchor aria-hidden=true href=#asn-下号>#</a></h2><p><img loading=lazy src=https://r2.qwq.mx/blog/20220402qbALxU.jpg alt=20220402qbALxU></p><h2 id=接入-bgp-session以-buyvm-为例vultr-类似>接入 BGP Session（以 BuyVM 为例，Vultr 类似）<a hidden class=anchor aria-hidden=true href=#接入-bgp-session以-buyvm-为例vultr-类似>#</a></h2><ul><li>发 <code>Ticket</code> 告诉客服你的 ASN 号，客服一般会向该 ASN 的管理员邮箱发送一串随机字符串，需要在工单中回复，验证你是 ASN 的持有人。稍后，客服会在面板里面加入你的 ASN 和你的 IP 段。</li></ul><p><img loading=lazy src=https://r2.qwq.mx/blog/20220402T4JgCU.png alt=20220402T4JgCU></p><ul><li>在你的 VPS 上安装 <code>bird</code>。用于宣告你的 IP。</li><li>修改 /etc/bird/bird6.conf 的配置文件</li><li>修改配置中的 router id 改为自己的 IPv4 地址</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>router id 205.121.23.12;
</span></span></code></pre></div><ul><li>在文件的最后添加上</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>protocol</span> <span class=n>bgp</span> <span class=n>vultr</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>local</span> <span class=n>as</span> <span class=err>你的</span> <span class=n>asn</span><span class=p>(</span><span class=err>开头不带</span> <span class=n>as</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>source</span> <span class=n>address</span> <span class=err>实例的</span> <span class=n>ipv6</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=n>import</span> <span class=n>none</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>export</span> <span class=n>all</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=n>graceful</span> <span class=n>restart</span> <span class=n>on</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=n>multihop</span> <span class=mi>2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=n>neighbor</span> <span class=mi>2001</span><span class=p>:</span> <span class=mi>19</span><span class=n>f0</span><span class=p>:</span> <span class=n>ffff</span><span class=p>::</span> <span class=mi>1</span> <span class=n>as</span> <span class=mi>64515</span><span class=p>;</span> <span class=c1>#这个是服务器的 ip</span>
</span></span><span class=line><span class=cl>  <span class=n>password</span> <span class=s2>&#34;在申请广播的时候设置的 bgp 密码&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><ul><li>寻找到 protocol static（没有的话自己加一个）</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>protocol static
</span></span><span class=line><span class=cl>{
</span></span><span class=line><span class=cl>  route  [v6 前缀] via [实例的 IPv6];
</span></span><span class=line><span class=cl>  #route  2001: 2333: 2333::/48 via 4096: 4096: 4096: 338: 5400: 01ff: fecf: 596c;
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><ul><li>找到 protocol direct</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>protocol direct
</span></span><span class=line><span class=cl>{
</span></span><span class=line><span class=cl>  interface &#34; dummy*&#34;;
</span></span><span class=line><span class=cl>  import all;
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><ul><li>配置虚拟网卡以及 ip 地址</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>ip link add dev dummy1 type dummy # 添加虚拟网卡
</span></span><span class=line><span class=cl>ip link set dummy1 up
</span></span><span class=line><span class=cl>ip addr add dev dummy1 [前缀内的任意一个地址] # 添加地址
</span></span></code></pre></div><ul><li>启动 bird6</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>service bird6 restart
</span></span></code></pre></div><ul><li>查看状态</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>birdc6 show route
</span></span><span class=line><span class=cl>birdc6 show proto all
</span></span></code></pre></div><ul><li>如果想要开机自启 在 <code>/etc/netplan</code> 新增 <code>01.dummy.yaml</code></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>network:
</span></span><span class=line><span class=cl>  version: 2
</span></span><span class=line><span class=cl>  renderer: networkd
</span></span><span class=line><span class=cl>  bridges:
</span></span><span class=line><span class=cl>    dummy0:
</span></span><span class=line><span class=cl>      dhcp4: no
</span></span><span class=line><span class=cl>      dhcp6: no
</span></span><span class=line><span class=cl>      accept-ra: no
</span></span><span class=line><span class=cl>      interfaces: [ ]
</span></span><span class=line><span class=cl>      addresses:
</span></span><span class=line><span class=cl>        - 2401: 95c0: f001:: 1/128 #你的 IP
</span></span></code></pre></div><h2 id=配置-xrayr-的出站路由>配置 XrayR 的出站路由<a hidden class=anchor aria-hidden=true href=#配置-xrayr-的出站路由>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>{
</span></span><span class=line><span class=cl>    &#34;domainStrategy&#34;: &#34;IPOnDemand&#34;,
</span></span><span class=line><span class=cl>    &#34;rules&#34;: [
</span></span><span class=line><span class=cl>        {
</span></span><span class=line><span class=cl>            &#34;type&#34;: &#34;field&#34;,
</span></span><span class=line><span class=cl>            &#34;outboundTag&#34;: &#34;block&#34;,
</span></span><span class=line><span class=cl>            &#34;ip&#34;: [
</span></span><span class=line><span class=cl>                &#34;geoip: private&#34;
</span></span><span class=line><span class=cl>            ]
</span></span><span class=line><span class=cl>        },
</span></span><span class=line><span class=cl>        {
</span></span><span class=line><span class=cl>            &#34;type&#34;: &#34;field&#34;,
</span></span><span class=line><span class=cl>            &#34;outboundTag&#34;: &#34;block&#34;,
</span></span><span class=line><span class=cl>            &#34;protocol&#34;: [
</span></span><span class=line><span class=cl>                &#34;bittorrent&#34;
</span></span><span class=line><span class=cl>            ]
</span></span><span class=line><span class=cl>        },
</span></span><span class=line><span class=cl>		# 指定域名走我自己的 IP
</span></span><span class=line><span class=cl>        {
</span></span><span class=line><span class=cl>            &#34;type&#34;: &#34;field&#34;,
</span></span><span class=line><span class=cl>            &#34;outboundTag&#34;: &#34;bgp_session&#34;,
</span></span><span class=line><span class=cl>            &#34;domain&#34;: [&#34;ipv6.ip.sb&#34;]
</span></span><span class=line><span class=cl>        },
</span></span><span class=line><span class=cl>		# Netflix 和 YouTube 走我自己的 IP
</span></span><span class=line><span class=cl>        {
</span></span><span class=line><span class=cl>            &#34;type&#34;: &#34;field&#34;,
</span></span><span class=line><span class=cl>            &#34;outboundTag&#34;: &#34;bgp_session&#34;,
</span></span><span class=line><span class=cl>            &#34;domain&#34;: [
</span></span><span class=line><span class=cl>                &#34;geosite: netflix&#34;,
</span></span><span class=line><span class=cl>                &#34;geosite: youtube&#34;
</span></span><span class=line><span class=cl>            ]
</span></span><span class=line><span class=cl>        }
</span></span><span class=line><span class=cl>    ]
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><h2 id=上网测试>上网测试<a hidden class=anchor aria-hidden=true href=#上网测试>#</a></h2><h3 id=ipsb>IP.SB<a hidden class=anchor aria-hidden=true href=#ipsb>#</a></h3><p><img loading=lazy src=https://r2.qwq.mx/blog/20220402WVLK3S.png alt=20220402WVLK3S></p><h3 id=netflix解锁台湾-nf-所有片源>Netflix（解锁台湾 NF 所有片源）<a hidden class=anchor aria-hidden=true href=#netflix解锁台湾-nf-所有片源>#</a></h3><p><img loading=lazy src=https://r2.qwq.mx/blog/20220402MRa9zP.png alt=20220402MRa9zP></p><h3 id=youtube支持-premium-tw>YouTube（支持 Premium TW）<a hidden class=anchor aria-hidden=true href=#youtube支持-premium-tw>#</a></h3><p><img loading=lazy src=https://r2.qwq.mx/blog/20220402oAFKci.png alt=20220402oAFKci></p><h2 id=参考文章>参考文章<a hidden class=anchor aria-hidden=true href=#参考文章>#</a></h2><p><a href=https://hex.moe/p/d6a20b99/>年轻人的第一个私人 BGP(二) - 广播你的 IP</a><br><a href=https://blog.ni-co.moe/public/560.html>IP 广播: 使用 bird 广播(组播)ipv6</a></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://missuo.me/tags/asn/>ASN</a></li><li><a href=https://missuo.me/tags/bgp/>BGP</a></li><li><a href=https://missuo.me/tags/bird/>Bird</a></li><li><a href=https://missuo.me/tags/linux/>Linux</a></li><li><a href=https://missuo.me/tags/buyvm/>BuyVM</a></li></ul><nav class=paginav><a class=prev href=https://missuo.me/posts/makes-google-voice-permanent/><span class=title>« Prev</span><br><span>Makes Google Voice permanent</span>
</a><a class=next href=https://missuo.me/posts/2019-hong-kong-travel/><span class=title>Next »</span><br><span>2019 Hong Kong Travel</span></a></nav></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css><script src=https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js></script><div id=gitalk-container></div><script>var gitalk=new Gitalk({clientID:"bb66e2f6184531acc333",clientSecret:"5b56d8f825539fbf01d0b87b5cdba9c6651f1373",repo:"missuo.github.io",owner:"missuo",admin:["missuo"],id:location.pathname,distractionFreeMode:!1});gitalk.render("gitalk-container")</script></article></main><footer class=footer><span>&copy; 2024 <a href=https://missuo.me>Vincent's Notes</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>